<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <header>
      <div class="header-brand">
        <img src="icons/icon32.png" alt="Limitr" class="header-icon">
        <h1>Limitr</h1>
      </div>
      <div class="header-controls">
        <div class="status" id="status">
          <span class="status-dot"></span>
          <span class="status-text">Off</span>
        </div>
        <label class="toggle">
          <input type="checkbox" id="enabled">
          <span class="slider"></span>
        </label>
      </div>
    </header>

    <div class="mode-row">
      <span class="mode-label crt-label" id="crtLabel" title="CRT visual effect: scanlines, vignette, color shift">CRT</span>
      <label class="toggle small">
        <input type="checkbox" id="crtToggle">
        <span class="slider"></span>
      </label>
      <span class="mode-divider">|</span>
      <span class="mode-label mixer-mode" id="mixerModeLabel" title="Mixer mode: control multiple tabs (no fullscreen)">Mixer</span>
      <label class="toggle small">
        <input type="checkbox" id="mixerModeToggle">
        <span class="slider"></span>
      </label>
      <span class="mode-divider">|</span>
      <span class="mode-label" id="modeLabel">Simple</span>
      <label class="toggle small">
        <input type="checkbox" id="modeToggle">
        <span class="slider"></span>
      </label>
    </div>

    <div class="meter-container">
      <label>Gain Reduction</label>
      <div class="meter">
        <div class="meter-fill" id="reductionMeter"></div>
        <span class="meter-value" id="reductionValue">0 dB</span>
      </div>
    </div>

    <!-- Presets -->
    <div class="presets-section">
      <div class="presets-grid">
        <button class="preset-btn" data-preset="off">
          <span class="preset-name">Off</span>
          <span class="preset-desc">No compression</span>
        </button>
        <button class="preset-btn preset-featured" data-preset="voiceFocus">
          <span class="preset-name">Voice Focus</span>
          <span class="preset-desc">Multiband + EQ</span>
        </button>
        <button class="preset-btn" data-preset="voiceClarity">
          <span class="preset-name">Voice Clarity</span>
          <span class="preset-desc">Speech & podcasts</span>
        </button>
        <button class="preset-btn" data-preset="normalize">
          <span class="preset-name">Normalize</span>
          <span class="preset-desc">Balanced volume</span>
        </button>
        <button class="preset-btn" data-preset="bassTamer">
          <span class="preset-name">Bass Tamer</span>
          <span class="preset-desc">Moderate + bass cut</span>
        </button>
        <button class="preset-btn" data-preset="nightMode">
          <span class="preset-name">Night Mode</span>
          <span class="preset-desc">Heavy + bass cut</span>
        </button>
        <button class="preset-btn" data-preset="tv90s">
          <span class="preset-name">90s TV</span>
          <span class="preset-desc">Tap twice for TV+</span>
        </button>
      </div>
    </div>

    <!-- Simple Mode Controls -->
    <div id="simpleControls" class="controls">
      <div class="control-group">
        <div class="control-header">
          <label for="outputGainSimple">Output Volume</label>
          <span class="value" id="outputGainSimpleValue">0 dB</span>
        </div>
        <input type="range" id="outputGainSimple" min="-24" max="24" value="0" step="1">
      </div>
    </div>

    <!-- Advanced Mode Controls -->
    <div id="advancedControls" class="controls" style="display: none;">
      <div class="control-section-label">Compressor</div>

      <div class="control-group">
        <div class="control-header">
          <label for="threshold">Threshold</label>
          <span class="value" id="thresholdValue">-24 dB</span>
        </div>
        <input type="range" id="threshold" min="-60" max="0" value="-24" step="1">
      </div>

      <div class="control-group">
        <div class="control-header">
          <label for="ratio">Ratio</label>
          <span class="value" id="ratioValue">8:1</span>
        </div>
        <input type="range" id="ratio" min="1" max="20" value="8" step="0.5">
      </div>

      <div class="control-group">
        <div class="control-header">
          <label for="knee">Knee</label>
          <span class="value" id="kneeValue">12 dB</span>
        </div>
        <input type="range" id="knee" min="0" max="40" value="12" step="1">
      </div>

      <div class="control-group">
        <div class="control-header">
          <label for="attack">Attack</label>
          <span class="value" id="attackValue">5 ms</span>
        </div>
        <input type="range" id="attack" min="0" max="100" value="5" step="1">
      </div>

      <div class="control-group">
        <div class="control-header">
          <label for="release">Release</label>
          <span class="value" id="releaseValue">100 ms</span>
        </div>
        <input type="range" id="release" min="10" max="1000" value="100" step="10">
      </div>

      <div class="control-section-label">Gain</div>

      <div class="control-group">
        <div class="control-header">
          <label for="makeupGain">Makeup Gain</label>
          <span class="value" id="makeupGainValue">0 dB</span>
        </div>
        <input type="range" id="makeupGain" min="0" max="24" value="0" step="1">
      </div>

      <div class="control-group">
        <div class="control-header">
          <label for="outputGain">Output Gain</label>
          <span class="value" id="outputGainValue">0 dB</span>
        </div>
        <input type="range" id="outputGain" min="-24" max="24" value="0" step="1">
      </div>

      <div class="control-section-label">Effects</div>

      <div class="control-group">
        <div class="control-header">
          <label for="noiseLevel">Noise Amount</label>
          <span class="value" id="noiseLevelValue">Off</span>
        </div>
        <input type="range" id="noiseLevel" min="0" max="0.3" value="0" step="0.01">
      </div>

      <div class="control-group">
        <div class="control-header">
          <label for="noiseType">Noise Type</label>
        </div>
        <select id="noiseType" class="dropdown">
          <option value="brown">Brown (Cozy rumble)</option>
          <option value="pink">Pink (Rain/CRT hum)</option>
          <option value="white">White (Harsh static)</option>
        </select>
      </div>

      <!-- 5-Band Parametric EQ Section -->
      <div class="control-section-label eq-header">
        <span>5-Band EQ</span>
        <label class="toggle small">
          <input type="checkbox" id="eqToggle">
          <span class="slider"></span>
        </label>
        <span class="eq-label" id="eqLabel">Off</span>
      </div>

      <div id="eqControls" style="display: none;">
        <!-- EQ Canvas Visualization -->
        <div class="eq-canvas-container">
          <canvas id="eqCanvas" width="268" height="100"></canvas>
          <div class="eq-legend">
            <span class="eq-legend-item band1">1</span>
            <span class="eq-legend-item band2">2</span>
            <span class="eq-legend-item band3">3</span>
            <span class="eq-legend-item band4">4</span>
            <span class="eq-legend-item band5">5</span>
          </div>
        </div>

        <!-- EQ Band 1 -->
        <div class="eq-band">
          <div class="eq-band-header">
            <span class="eq-band-label band1">Band 1</span>
            <select id="eq1Type" class="dropdown-small">
              <option value="highpass">Highpass</option>
              <option value="lowshelf">Low Shelf</option>
              <option value="peaking">Bell</option>
            </select>
          </div>
          <div class="eq-band-controls">
            <div class="eq-control">
              <label>Freq</label>
              <input type="range" id="eq1Freq" min="20" max="500" value="80" step="1">
              <span class="value" id="eq1FreqValue">80 Hz</span>
            </div>
            <div class="eq-control">
              <label>Gain</label>
              <input type="range" id="eq1Gain" min="-12" max="12" value="0" step="1">
              <span class="value" id="eq1GainValue">0 dB</span>
            </div>
          </div>
        </div>

        <!-- EQ Band 2 -->
        <div class="eq-band">
          <div class="eq-band-header">
            <span class="eq-band-label band2">Band 2</span>
            <select id="eq2Type" class="dropdown-small">
              <option value="lowshelf">Low Shelf</option>
              <option value="peaking" selected>Bell</option>
              <option value="notch">Notch</option>
            </select>
          </div>
          <div class="eq-band-controls">
            <div class="eq-control">
              <label>Freq</label>
              <input type="range" id="eq2Freq" min="100" max="1000" value="250" step="5">
              <span class="value" id="eq2FreqValue">250 Hz</span>
            </div>
            <div class="eq-control">
              <label>Gain</label>
              <input type="range" id="eq2Gain" min="-12" max="12" value="0" step="1">
              <span class="value" id="eq2GainValue">0 dB</span>
            </div>
          </div>
        </div>

        <!-- EQ Band 3 -->
        <div class="eq-band">
          <div class="eq-band-header">
            <span class="eq-band-label band3">Band 3</span>
            <select id="eq3Type" class="dropdown-small">
              <option value="peaking" selected>Bell</option>
              <option value="notch">Notch</option>
            </select>
          </div>
          <div class="eq-band-controls">
            <div class="eq-control">
              <label>Freq</label>
              <input type="range" id="eq3Freq" min="500" max="4000" value="1000" step="10">
              <span class="value" id="eq3FreqValue">1.0k</span>
            </div>
            <div class="eq-control">
              <label>Gain</label>
              <input type="range" id="eq3Gain" min="-12" max="12" value="0" step="1">
              <span class="value" id="eq3GainValue">0 dB</span>
            </div>
          </div>
        </div>

        <!-- EQ Band 4 -->
        <div class="eq-band">
          <div class="eq-band-header">
            <span class="eq-band-label band4">Band 4</span>
            <select id="eq4Type" class="dropdown-small">
              <option value="peaking" selected>Bell</option>
              <option value="highshelf">High Shelf</option>
              <option value="notch">Notch</option>
            </select>
          </div>
          <div class="eq-band-controls">
            <div class="eq-control">
              <label>Freq</label>
              <input type="range" id="eq4Freq" min="2000" max="10000" value="4000" step="50">
              <span class="value" id="eq4FreqValue">4.0k</span>
            </div>
            <div class="eq-control">
              <label>Gain</label>
              <input type="range" id="eq4Gain" min="-12" max="12" value="0" step="1">
              <span class="value" id="eq4GainValue">0 dB</span>
            </div>
          </div>
        </div>

        <!-- EQ Band 5 -->
        <div class="eq-band">
          <div class="eq-band-header">
            <span class="eq-band-label band5">Band 5</span>
            <select id="eq5Type" class="dropdown-small">
              <option value="highshelf" selected>High Shelf</option>
              <option value="peaking">Bell</option>
              <option value="lowpass">Lowpass</option>
            </select>
          </div>
          <div class="eq-band-controls">
            <div class="eq-control">
              <label>Freq</label>
              <input type="range" id="eq5Freq" min="5000" max="20000" value="12000" step="100">
              <span class="value" id="eq5FreqValue">12.0k</span>
            </div>
            <div class="eq-control">
              <label>Gain</label>
              <input type="range" id="eq5Gain" min="-12" max="12" value="0" step="1">
              <span class="value" id="eq5GainValue">0 dB</span>
            </div>
          </div>
        </div>
      </div>

      <!-- 3-Band Multiband Compressor Section -->
      <div class="control-section-label multiband-header">
        <span>3-Band Multiband</span>
        <label class="toggle small">
          <input type="checkbox" id="multibandToggle">
          <span class="slider"></span>
        </label>
        <span class="multiband-label" id="multibandLabel">Off</span>
      </div>

      <div id="multibandControls" style="display: none;">
        <!-- Crossover Frequencies (2 crossovers for 3 bands) -->
        <div class="multiband-crossovers">
          <div class="control-group half">
            <div class="control-header">
              <label for="crossover1">Sub/Mid</label>
              <span class="value" id="crossover1Value">200 Hz</span>
            </div>
            <input type="range" id="crossover1" min="80" max="500" value="200" step="10">
          </div>
          <div class="control-group half">
            <div class="control-header">
              <label for="crossover2">Mid/High</label>
              <span class="value" id="crossover2Value">3.0k Hz</span>
            </div>
            <input type="range" id="crossover2" min="1000" max="8000" value="3000" step="100">
          </div>
        </div>

        <!-- Per-Band Thresholds (3 bands) -->
        <div class="multiband-thresholds">
          <div class="control-group third">
            <div class="control-header">
              <label for="subThreshold" class="band-label sub">Sub</label>
              <span class="value" id="subThresholdValue">-20 dB</span>
            </div>
            <input type="range" id="subThreshold" min="-60" max="0" value="-20" step="1">
          </div>
          <div class="control-group third">
            <div class="control-header">
              <label for="midThreshold" class="band-label mid">Mid</label>
              <span class="value" id="midThresholdValue">-24 dB</span>
            </div>
            <input type="range" id="midThreshold" min="-60" max="0" value="-24" step="1">
          </div>
          <div class="control-group third">
            <div class="control-header">
              <label for="highThreshold" class="band-label high">High</label>
              <span class="value" id="highThresholdValue">-24 dB</span>
            </div>
            <input type="range" id="highThreshold" min="-60" max="0" value="-24" step="1">
          </div>
        </div>

        <!-- Per-Band Gains (3 bands) -->
        <div class="multiband-gains">
          <div class="control-group third">
            <div class="control-header">
              <label for="subGain" class="band-label sub">Sub</label>
              <span class="value" id="subGainValue">0 dB</span>
            </div>
            <input type="range" id="subGain" min="-12" max="12" value="0" step="1">
          </div>
          <div class="control-group third">
            <div class="control-header">
              <label for="midGain" class="band-label mid">Mid</label>
              <span class="value" id="midGainValue">0 dB</span>
            </div>
            <input type="range" id="midGain" min="-12" max="12" value="0" step="1">
          </div>
          <div class="control-group third">
            <div class="control-header">
              <label for="highGain" class="band-label high">High</label>
              <span class="value" id="highGainValue">0 dB</span>
            </div>
            <input type="range" id="highGain" min="-12" max="12" value="0" step="1">
          </div>
        </div>
      </div>
    </div>

    <!-- Other Tabs Mixer -->
    <div class="mixer-section">
      <button class="mixer-toggle" id="mixerToggle">
        <span class="mixer-toggle-icon">&#9658;</span>
        <span>Other Tabs with Audio</span>
        <span class="media-count" id="mediaCount">0</span>
      </button>
      <div class="mixer-panel" id="mixerPanel" style="display: none;">
        <div class="mixer-list" id="mixerList">
          <div class="mixer-empty">No tabs playing audio</div>
        </div>
      </div>
    </div>

    <footer>
      <span class="footer-text">Limitr - Ozan Karaali</span>
    </footer>
  </div>

  <script src="popup.js"></script>
</body>
</html>
