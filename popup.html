<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <header>
      <div class="header-brand">
        <img src="icons/icon32.png" alt="Limitr" class="header-icon">
        <h1>Limitr</h1>
      </div>
      <div class="header-controls">
        <div class="status" id="status">
          <span class="status-dot"></span>
          <span class="status-text">Off</span>
        </div>
        <label class="toggle">
          <input type="checkbox" id="enabled">
          <span class="slider"></span>
        </label>
      </div>
    </header>

    <div class="mode-row">
      <span class="mode-label crt-label" id="crtLabel" title="CRT visual effect: scanlines, vignette, color shift">CRT</span>
      <label class="toggle small">
        <input type="checkbox" id="crtToggle">
        <span class="slider"></span>
      </label>
      <span class="mode-divider">|</span>
      <span class="mode-label mixer-mode" id="mixerModeLabel" title="Mixer mode: control multiple tabs (no fullscreen)">Mixer</span>
      <label class="toggle small">
        <input type="checkbox" id="mixerModeToggle">
        <span class="slider"></span>
      </label>
      <span class="mode-divider">|</span>
      <span class="mode-label" id="modeLabel">Simple</span>
      <label class="toggle small">
        <input type="checkbox" id="modeToggle">
        <span class="slider"></span>
      </label>
    </div>

    <div class="meter-container">
      <label>Gain Reduction</label>
      <div class="meter">
        <div class="meter-fill" id="reductionMeter"></div>
        <span class="meter-value" id="reductionValue">0 dB</span>
      </div>
    </div>

    <!-- Presets (shown in both modes, Off first then light to heavy) -->
    <div class="presets-section">
      <div class="presets-grid">
        <button class="preset-btn" data-preset="off">
          <span class="preset-name">Off</span>
          <span class="preset-desc">No compression</span>
        </button>
        <button class="preset-btn" data-preset="voiceClarity">
          <span class="preset-name">Voice Clarity</span>
          <span class="preset-desc">Speech & podcasts</span>
        </button>
        <button class="preset-btn" data-preset="normalize">
          <span class="preset-name">Normalize</span>
          <span class="preset-desc">Balanced volume</span>
        </button>
        <button class="preset-btn" data-preset="bassTamer">
          <span class="preset-name">Bass Tamer</span>
          <span class="preset-desc">Moderate + bass cut</span>
        </button>
        <button class="preset-btn" data-preset="nightMode">
          <span class="preset-name">Night Mode</span>
          <span class="preset-desc">Heavy + bass cut</span>
        </button>
        <button class="preset-btn" data-preset="tv90s">
          <span class="preset-name">90s TV</span>
          <span class="preset-desc">Tap twice for TV+</span>
        </button>
      </div>
    </div>

    <!-- Simple Mode Controls -->
    <div id="simpleControls" class="controls">
      <div class="control-group">
        <div class="control-header">
          <label for="outputGainSimple">Output Volume</label>
          <span class="value" id="outputGainSimpleValue">0 dB</span>
        </div>
        <input type="range" id="outputGainSimple" min="-24" max="24" value="0" step="1">
      </div>
    </div>

    <!-- Advanced Mode Controls -->
    <div id="advancedControls" class="controls" style="display: none;">
      <div class="control-section-label">Compressor</div>

      <div class="control-group">
        <div class="control-header">
          <label for="threshold">Threshold</label>
          <span class="value" id="thresholdValue">-24 dB</span>
        </div>
        <input type="range" id="threshold" min="-60" max="0" value="-24" step="1">
      </div>

      <div class="control-group">
        <div class="control-header">
          <label for="ratio">Ratio</label>
          <span class="value" id="ratioValue">8:1</span>
        </div>
        <input type="range" id="ratio" min="1" max="20" value="8" step="0.5">
      </div>

      <div class="control-group">
        <div class="control-header">
          <label for="knee">Knee</label>
          <span class="value" id="kneeValue">12 dB</span>
        </div>
        <input type="range" id="knee" min="0" max="40" value="12" step="1">
      </div>

      <div class="control-group">
        <div class="control-header">
          <label for="attack">Attack</label>
          <span class="value" id="attackValue">5 ms</span>
        </div>
        <input type="range" id="attack" min="0" max="100" value="5" step="1">
      </div>

      <div class="control-group">
        <div class="control-header">
          <label for="release">Release</label>
          <span class="value" id="releaseValue">100 ms</span>
        </div>
        <input type="range" id="release" min="10" max="1000" value="100" step="10">
      </div>

      <div class="control-section-label">Gain</div>

      <div class="control-group">
        <div class="control-header">
          <label for="makeupGain">Makeup Gain</label>
          <span class="value" id="makeupGainValue">0 dB</span>
        </div>
        <input type="range" id="makeupGain" min="0" max="24" value="0" step="1">
      </div>

      <div class="control-group">
        <div class="control-header">
          <label for="outputGain">Output Gain</label>
          <span class="value" id="outputGainValue">0 dB</span>
        </div>
        <input type="range" id="outputGain" min="-24" max="24" value="0" step="1">
      </div>

      <div class="control-section-label">Filters</div>

      <div class="control-group">
        <div class="control-header">
          <label for="highpassFreq">Highpass (Bass Cut)</label>
          <span class="value" id="highpassFreqValue">Off</span>
        </div>
        <input type="range" id="highpassFreq" min="0" max="300" value="0" step="10">
      </div>

      <div class="control-group">
        <div class="control-header">
          <label for="lowpassFreq">Lowpass (Treble Cut)</label>
          <span class="value" id="lowpassFreqValue">Off</span>
        </div>
        <input type="range" id="lowpassFreq" min="2000" max="22050" value="22050" step="500">
      </div>

      <div class="control-section-label">Effects</div>

      <div class="control-group">
        <div class="control-header">
          <label for="noiseLevel">Noise Amount</label>
          <span class="value" id="noiseLevelValue">Off</span>
        </div>
        <input type="range" id="noiseLevel" min="0" max="0.3" value="0" step="0.01">
      </div>

      <div class="control-group">
        <div class="control-header">
          <label for="noiseType">Noise Type</label>
        </div>
        <select id="noiseType" class="dropdown">
          <option value="brown">Brown (Cozy rumble)</option>
          <option value="pink">Pink (Rain/CRT hum)</option>
          <option value="white">White (Harsh static)</option>
        </select>
      </div>
    </div>

    <!-- Other Tabs Mixer -->
    <div class="mixer-section">
      <button class="mixer-toggle" id="mixerToggle">
        <span class="mixer-toggle-icon">&#9658;</span>
        <span>Other Tabs with Audio</span>
        <span class="media-count" id="mediaCount">0</span>
      </button>
      <div class="mixer-panel" id="mixerPanel" style="display: none;">
        <div class="mixer-list" id="mixerList">
          <div class="mixer-empty">No tabs playing audio</div>
        </div>
      </div>
    </div>

    <footer>
      <span class="footer-text">Limitr - Ozan Karaali</span>
    </footer>
  </div>

  <script src="popup.js"></script>
</body>
</html>
